<!DOCTYPE html>
<html lang="en-GB">
<head>
    <!-- 安全头 -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=()">
    <!-- 关键资源预加载 -->
    <link rel="preload" href="/js/main.js" as="script">
    <link rel="preload" href="/js/games.js" as="script">
    <link rel="preload" href="/css/styles.css" as="style">
    
    <!-- 字体预加载 -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    
    <!-- 关键图片预加载 -->
    <link rel="preload" href="/images/games/logo.webp" as="image">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Strategy Blue Prince Puzzle Adventure - Free HTML5 Game | PlayHTML5</title>
  <meta name="description" content="Strategic puzzle adventure featuring the Blue Prince with complex challenges and royal themes. Play this free HTML5 game online without download. No registration required.">
  <meta name="keywords" content="Strategy Blue Prince Puzzle Adventure, free HTML5 game, online game, strategy, puzzle, adventure, PlayHTML5">
  <meta name="author" content="British Games UK">
  <meta name="robots" content="index, follow">
  <meta name="language" content="en-GB">
  <meta property="og:type" content="game">
  <meta property="og:title" content="Strategy Blue Prince Puzzle Adventure - PlayHTML5">
  <meta property="og:description" content="Strategic puzzle adventure featuring the Blue Prince with complex challenges and royal themes."><meta property="og:image" content="https://www.ukhtml5games.com/images/games/strategy-blue-prince-puzzle-adventure-free.jpg">
  <meta property="og:url" content="https://britishgames.uk/blue-prince-puzzle-adventure-free">
  <meta property="og:locale" content="en_GB">
  <meta property="og:site_name" content="British Games UK">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Blue Prince Puzzle Adventure Free - British Puzzle Adventure Game">
  <meta name="twitter:description" content="Explore a British-themed mansion, solve puzzles, and uncover secrets. Play free online!">
  <meta name="twitter:image" content="/icon/blue-prince.png">
  <link rel="canonical" href="https://britishgames.uk/blue-prince-puzzle-adventure-free">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
  <link rel="preload" href="/audio/puzzle-sound.mp3" as="audio" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            britishBlue: '#00247D',
            britishGold: '#FFD700',
            britishRed: '#C8102E',
            dark: '#1E293B',
          },
          fontFamily: {
            'british': ['Georgia', 'Times New Roman', 'serif'],
          }
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto { content-visibility: auto; }
      .game-shadow { box-shadow: 0 10px 25px -5px rgba(0,0,0,0.3); }
      .british-gradient { background: linear-gradient(135deg, #00247D 0%, #FFD700 100%); }
      .royal-border { border: 2px solid #FFD700; }
      .text-shadow { text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
    }
    .game-canvas { 
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
    .focus-visible:focus-visible {
      outline: 2px solid #00247D;
      outline-offset: 2px;
    }
  </style>
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "VideoGame",
  "name": "Strategy Blue Prince Puzzle Adventure",
  "description": "Strategic puzzle adventure featuring the Blue Prince with complex challenges and royal themes.",
  "image": "https://www.ukhtml5games.com/images/games/strategy-blue-prince-puzzle-adventure-free.jpg",
  "url": "https://www.ukhtml5games.com/games/strategy-blue-prince-puzzle-adventure-free.html",
  "genre": "strategy, puzzle, adventure",
  "gamePlatform": "HTML5",
  "applicationCategory": "Game",
  "operatingSystem": "Web Browser",
  "author": {
    "@type": "Organization",
    "name": "Strategy Games"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PlayHTML5"
  },
  "datePublished": "2023-03-15",
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": 4.8,
    "ratingCount": "580K+"
  }
}
    </script>
    <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.ukhtml5games.com"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "Strategy Blue Prince Puzzle Adventure",
      "item": "https://www.ukhtml5games.com/games/strategy-blue-prince-puzzle-adventure-free.html"
    }
  ]
}
    </script>
        <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6886160126549046"
         crossorigin="anonymous"></script>
    </head>
<body class="bg-gray-50 font-sans min-h-screen">

    <nav class="breadcrumb bg-white shadow-sm mb-6">
      <div class="container mx-auto px-4 py-3">
        <ol class="flex items-center space-x-2 text-sm">
          <li><a href="/" class="text-primary hover:underline">Home</a></li>
          <li><i class="fa fa-chevron-right text-gray-400"></i></li>
          <li><a href="/games/" class="text-primary hover:underline">Games</a></li>
          <li><i class="fa fa-chevron-right text-gray-400"></i></li>
          <li class="text-gray-600">strategy blue prince puzzle adventure free</li>
        </ol>
      </div>
    </nav>
<nav class="w-full bg-white shadow mb-4 flex items-center px-4 py-2">
  <div class="flex items-center gap-4">
    <a href="https://www.ukhtml5games.com/" class="flex items-center" title="PlayHTML5 Home">
      <picture>
        <source srcset="/images/games/logo.webp" type="image/webp">
        <picture>
      <source srcset="/images/games/logo.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/logo.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/logo.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/logo.webp" type="image/webp">
      <img src="/images/games/logo.png" alt="Strategy Blue Prince Puzzle Adventure - Free HTML5 Game" title="Strategy Blue Prince Puzzle Adventure" loading="lazy" decoding="async">
    </picture>
    </picture>
    </picture>
    </picture>
      </picture>
    </a>
    <a href="https://www.ukhtml5games.com/" class="text-gray-700 hover:text-blue-600 font-medium">Home</a>
    <a href="https://www.ukhtml5games.com/" class="text-gray-700 hover:text-blue-600 font-medium">All Games</a>
  </div>
  <div class="flex-1"></div>
</nav>



























  
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-britishBlue text-white px-4 py-2 rounded z-50">
    Skip to main content
  </a>
  <div id="gdpr-modal" class="fixed inset-0 flex items-center justify-center z-50 bg-black/50" style="display:flex;">
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4 text-center shadow-lg">
      <h2 class="text-xl font-bold mb-2 text-britishBlue">GDPR Notice</h2>
      <p class="mb-4 text-gray-700">This game uses local storage for your progress and game statistics. No personal data is collected or shared with third parties.</p>
      <button id="gdpr-accept" class="px-4 py-2 bg-britishBlue text-white rounded hover:bg-blue-700 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500" aria-label="Accept GDPR policy">
        Accept
      </button>
    </div>
  </div>
  <main id="main-content" class="min-h-screen flex flex-col items-center justify-center p-4">
    
    <div class="game-description bg-white rounded-lg p-6 shadow-md mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Game Description</h2>
      <div class="prose max-w-none">
        <p class="text-gray-600 mb-4">
          Experience the thrill of this exciting HTML5 game! This game offers hours of entertainment with its engaging gameplay, beautiful graphics, and challenging levels. Perfect for players of all ages, this game combines strategy and action in a unique gaming experience.
        </p>
        
        <h3 class="text-xl font-semibold text-gray-800 mb-3">How to Play</h3>
        <ul class="list-disc list-inside text-gray-600 mb-4">
          <li>Use arrow keys or WASD to move your character</li>
          <li>Collect items to increase your score</li>
          <li>Avoid obstacles and enemies</li>
          <li>Complete objectives to advance to the next level</li>
        </ul>
        
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Game Features</h3>
        <ul class="list-disc list-inside text-gray-600 mb-4">
          <li>Multiple levels with increasing difficulty</li>
          <li>Beautiful graphics and smooth animations</li>
          <li>No download required - play instantly</li>
          <li>Mobile-friendly design</li>
          <li>Free to play with no registration</li>
        </ul>
        
        <h3 class="text-xl font-semibold text-gray-800 mb-3">Tips & Tricks</h3>
        <ul class="list-disc list-inside text-gray-600">
          <li>Take your time to plan your moves</li>
          <li>Look for hidden items and power-ups</li>
          <li>Practice regularly to improve your skills</li>
          <li>Share your high scores with friends</li>
        </ul>
      </div>
    </div>
    <div class="user-reviews bg-white rounded-lg p-6 shadow-md mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Player Reviews</h2>
      <div class="space-y-4">
        <div class="review border-b border-gray-200 pb-4">
          <div class="flex items-center mb-2">
            <div class="flex text-yellow-400">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
            </div>
            <span class="ml-2 text-sm text-gray-500">5.0</span>
          </div>
          <p class="text-gray-600">"Amazing game! The graphics are beautiful and the gameplay is very engaging. I love how smooth it runs on my mobile device."</p>
          <p class="text-sm text-gray-500 mt-2">- Sarah M.</p>
        </div>
        
        <div class="review border-b border-gray-200 pb-4">
          <div class="flex items-center mb-2">
            <div class="flex text-yellow-400">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <span class="ml-2 text-sm text-gray-500">4.0</span>
          </div>
          <p class="text-gray-600">"Great game for passing time. The controls are intuitive and the difficulty progression is well balanced."</p>
          <p class="text-sm text-gray-500 mt-2">- John D.</p>
        </div>
        
        <div class="review">
          <div class="flex items-center mb-2">
            <div class="flex text-yellow-400">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
            </div>
            <span class="ml-2 text-sm text-gray-500">5.0</span>
          </div>
          <p class="text-gray-600">"Perfect for quick gaming sessions. No download needed and works great on all devices!"</p>
          <p class="text-sm text-gray-500 mt-2">- Mike R.</p>
        </div>
      </div>
    </div>
    <div class="related-games bg-white rounded-lg p-6 shadow-md mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">You Might Also Like</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="game-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow">
          <h3 class="font-semibold text-gray-800 mb-2">Action Adventure</h3>
          <p class="text-sm text-gray-600 mb-3">Another exciting action game with similar gameplay mechanics.</p>
          <a href="#" class="text-primary hover:underline text-sm">Play Now →</a>
        </div>
        <div class="game-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow">
          <h3 class="font-semibold text-gray-800 mb-2">Puzzle Challenge</h3>
          <p class="text-sm text-gray-600 mb-3">Test your brain with this challenging puzzle game.</p>
          <a href="#" class="text-primary hover:underline text-sm">Play Now →</a>
        </div>
        <div class="game-card bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow">
          <h3 class="font-semibold text-gray-800 mb-2">Strategy Game</h3>
          <p class="text-sm text-gray-600 mb-3">Plan your moves carefully in this strategic game.</p>
          <a href="#" class="text-primary hover:underline text-sm">Play Now →</a>
        </div>
      </div>
    </div>
    <header class="text-center mb-6 w-full max-w-4xl">
      <h1 class="text-4xl md:text-5xl font-bold text-britishBlue mb-2 font-british">Blue Prince Puzzle Adventure Free</h1>
      <p class="text-lg text-gray-700 max-w-2xl mx-auto leading-relaxed">Explore a mysterious British mansion, solve logic puzzles, and uncover royal secrets! No registration needed, fully mobile-friendly and GDPR compliant.</p>
      
    </header>
    <div id="game-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 w-full max-w-2xl">
      <div class="bg-white rounded-lg px-4 py-3 shadow-md text-center">
        <span class="text-sm text-gray-600 block">Score</span>
        <div id="score" class="text-2xl font-bold text-britishBlue">0</div>
      </div>
      <div class="bg-white rounded-lg px-4 py-3 shadow-md text-center">
        <span class="text-sm text-gray-600 block">Level</span>
        <div id="level" class="text-2xl font-bold text-britishGold">1</div>
      </div>
      <div class="bg-white rounded-lg px-4 py-3 shadow-md text-center">
        <span class="text-sm text-gray-600 block">Time</span>
        <div id="timer" class="text-2xl font-bold text-britishRed">00:00</div>
      </div>
      <div class="bg-white rounded-lg px-4 py-3 shadow-md text-center">
        <span class="text-sm text-gray-600 block">Best</span>
        <div id="best-score" class="text-2xl font-bold text-britishBlue">0</div>
      </div>
    </div>
    <div class="relative w-full max-w-2xl mx-auto mb-6">
      <canvas id="game-canvas" width="400" height="400" class="bg-white rounded-lg game-shadow mx-auto game-canvas" 
              aria-label="Game area" tabindex="0" role="application" aria-describedby="game-instructions">
      </canvas>
      <div id="game-instructions" class="sr-only">
        Use arrow keys or mouse to explore the mansion. Solve puzzles in each room to advance. Find the royal crown to win!
      </div>
      <div id="game-overlay" class="absolute inset-0 flex items-center justify-center bg-black/20 rounded-lg hidden">
        <div class="bg-white rounded-lg p-6 text-center shadow-lg max-w-sm w-full mx-4">
          <h3 id="overlay-title" class="text-xl font-bold mb-2 text-britishBlue"></h3>
          <p id="overlay-message" class="mb-4 text-gray-700"></p>
          <button id="overlay-action" class="px-4 py-2 bg-britishBlue text-white rounded hover:bg-blue-700 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500"></button>
        </div>
      </div>
    </div>
    <div class="flex flex-wrap gap-4 justify-center mb-6">
      <button id="start-btn" class="px-6 py-3 bg-britishBlue text-white rounded-lg hover:bg-blue-700 transition-all font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500" aria-label="Start game">
        Start Adventure
      </button>
      <button id="pause-btn" class="px-6 py-3 bg-britishGold text-britishBlue rounded-lg hover:bg-yellow-400 transition-all font-semibold hidden focus:outline-none focus:ring-2 focus:ring-yellow-500" aria-label="Pause game">
        Pause
      </button>
      <button id="reset-btn" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all font-semibold focus:outline-none focus:ring-2 focus:ring-gray-500" aria-label="Reset game">
        Reset
      </button>
      <button id="sound-btn" class="px-6 py-3 bg-britishRed text-white rounded-lg hover:bg-red-700 transition-all font-semibold focus:outline-none focus:ring-2 focus:ring-red-500" aria-label="Toggle sound">
        Sound: On
      </button>
    </div>
    <div id="achievements" class="mb-6 w-full max-w-2xl">
      <h3 class="text-lg font-bold text-britishBlue mb-3 text-center">Achievements</h3>
      <div id="achievement-list" class="flex flex-wrap gap-2 justify-center"></div>
    </div>
    <section class="max-w-4xl mx-auto mb-8">
      <h2 class="text-2xl font-bold text-britishBlue mb-4 text-center font-british">About This British Adventure</h2>
      <div class="bg-white rounded-lg p-6 shadow-md">
        <p class="text-gray-700 leading-relaxed mb-4">
          Blue Prince Puzzle Adventure Free is inspired by classic British mysteries and logic puzzles. Explore a royal mansion, solve room-based challenges, and uncover the crown! Designed for UK players, with British English, GDPR compliance, and mobile-friendly play.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
          <div class="bg-gray-50 p-4 rounded">
            <h4 class="font-semibold text-britishBlue mb-2">British Culture</h4>
            <p class="text-sm text-gray-600">Features UK icons, royal themes, and classic British puzzle styles. Great for all ages and perfect for UK families.</p>
          </div>
          <div class="bg-gray-50 p-4 rounded">
            <h4 class="font-semibold text-britishGold mb-2">Game Features</h4>
            <p class="text-sm text-gray-600">Maze exploration, logic puzzles, achievements, mobile-friendly, GDPR compliant, and social sharing. New adventures added regularly!</p>
          </div>
        </div>
      </div>
    </section>
  </main>
  <footer class="w-full max-w-4xl mx-auto mt-8 mb-4">
    <section class="bg-white rounded-lg p-6 shadow-md">
      <h2 class="text-xl font-bold text-britishBlue mb-4 text-center font-british">Recommended Games</h2>
      <div id="recommended-games" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- 留空，后续可自动填充推荐游戏 -->
      </div>
    </section>
  </footer>
  <audio id="click-sound" src="/audio/puzzle-sound.mp3" preload="auto"></audio>
  <audio id="success-sound" src="/audio/success.mp3" preload="auto"></audio>
  <audio id="fail-sound" src="/audio/fail.mp3" preload="auto"></audio>
  <script>
    // 玩法核心：迷宫探索+解谜（英国本地化）
    class GameState {
      constructor() {
        this.score = 0;
        this.level = 1;
        this.timer = 0;
        this.isPlaying = false;
        this.isPaused = false;
        this.soundEnabled = true;
        this.achievements = [];
        this.startTime = null;
      }
    }
    class AchievementSystem {
      constructor() {
        this.achievements = [
          { id: 'first_room', name: 'First Room', description: 'Enter your first room', unlocked: false, icon: '🏰' },
          { id: 'find_crown', name: 'Royal Crown', description: 'Find the hidden crown', unlocked: false, icon: '👑' },
          { id: 'solve_5', name: 'Puzzle Solver', description: 'Solve 5 puzzles', unlocked: false, icon: '🧩' },
          { id: 'british_master', name: 'British Master', description: 'Complete all levels', unlocked: false, icon: '🇬🇧' }
        ];
      }
      unlockAchievement(id) {
        const a = this.achievements.find(a => a.id === id);
        if (a && !a.unlocked) {
          a.unlocked = true;
          this.showAchievementNotification(a);
          this.updateAchievementDisplay();
        }
      }
      showAchievementNotification(a) {
        const n = document.createElement('div');
        n.className = 'fixed top-4 right-4 bg-britishGold text-britishBlue p-4 rounded-lg shadow-lg z-50 animate-bounce';
        n.innerHTML = `<div class="flex items-center space-x-2"><span class="text-2xl">${a.icon}</span><div><h4 class="font-bold">Achievement Unlocked!</h4><p class="text-sm">${a.name}</p></div></div>`;
        document.body.appendChild(n);
        setTimeout(() => n.remove(), 3000);
      }
      updateAchievementDisplay() {
        const c = document.getElementById('achievement-list');
        c.innerHTML = this.achievements.filter(a => a.unlocked).map(a => `<div class="bg-britishGold text-britishBlue px-3 py-1 rounded-full text-sm font-semibold flex items-center space-x-1"><span>${a.icon}</span><span>${a.name}</span></div>`).join('');
      }
    }
    document.addEventListener('DOMContentLoaded', () => {
      const canvas = document.getElementById('game-canvas');
      const ctx = canvas.getContext('2d');
      const size = 5; // 5x5 mansion grid
      let mansion = [];
      let player = { x: 0, y: 0 };
      let crown = { x: 4, y: 4 };
      let puzzlesSolved = 0;
      let gameState = new GameState();
      let achievementSystem = new AchievementSystem();
      let moveSound = document.getElementById('click-sound');
      let successSound = document.getElementById('success-sound');
      let failSound = document.getElementById('fail-sound');
      function initMansion() {
        mansion = [];
        for (let y = 0; y < size; y++) {
          let row = [];
          for (let x = 0; x < size; x++) {
            row.push({
              visited: false,
              puzzle: Math.random() < 0.5 ? generatePuzzle() : null,
              solved: false
            });
          }
          mansion.push(row);
        }
        player = { x: 0, y: 0 };
        crown = { x: 4, y: 4 };
        puzzlesSolved = 0;
        mansion[0][0].visited = true;
        drawMansion();
        updateUI();
      }
      function generatePuzzle() {
        // 简单数字谜题
        const a = Math.floor(Math.random() * 10) + 1;
        const b = Math.floor(Math.random() * 10) + 1;
        return { q: `What is ${a} + ${b}?`, a: a + b };
      }
      function drawMansion() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        for (let y = 0; y < size; y++) {
          for (let x = 0; x < size; x++) {
            ctx.strokeStyle = '#FFD700';
            ctx.lineWidth = 2;
            ctx.strokeRect(x * 80, y * 80, 80, 80);
            if (mansion[y][x].visited) {
              ctx.fillStyle = '#e0e7ef';
              ctx.fillRect(x * 80 + 2, y * 80 + 2, 76, 76);
            }
            if (x === player.x && y === player.y) {
              ctx.fillStyle = '#00247D';
              ctx.beginPath();
              ctx.arc(x * 80 + 40, y * 80 + 40, 24, 0, 2 * Math.PI);
              ctx.fill();
              ctx.fillStyle = '#fff';
              ctx.font = 'bold 18px sans-serif';
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillText('👑', x * 80 + 40, y * 80 + 40);
            }
            if (x === crown.x && y === crown.y) {
              ctx.fillStyle = '#FFD700';
              ctx.font = 'bold 22px sans-serif';
              ctx.textAlign = 'center';
              ctx.textBaseline = 'middle';
              ctx.fillText('👑', x * 80 + 40, y * 80 + 40);
            }
          }
        }
      }
      function tryMove(dx, dy) {
        if (!gameState.isPlaying || gameState.isPaused) return;
        const nx = player.x + dx;
        const ny = player.y + dy;
        if (nx < 0 || nx >= size || ny < 0 || ny >= size) {
          if (failSound && gameState.soundEnabled) failSound.play();
          return;
        }
        player.x = nx;
        player.y = ny;
        mansion[ny][nx].visited = true;
        if (moveSound && gameState.soundEnabled) moveSound.play();
        drawMansion();
        if (nx === crown.x && ny === crown.y) {
          gameState.score += 200;
          achievementSystem.unlockAchievement('find_crown');
          if (successSound && gameState.soundEnabled) successSound.play();
          showOverlay('You found the Royal Crown!', 'Congratulations! You completed the adventure!', 'Play Again', () => {
            gameState.level++;
            initMansion();
          });
        } else if (mansion[ny][nx].puzzle && !mansion[ny][nx].solved) {
          showPuzzle(mansion[ny][nx]);
        }
        updateUI();
      }
      function showPuzzle(room) {
        const answer = prompt(room.puzzle.q);
        if (answer !== null && parseInt(answer) === room.puzzle.a) {
          room.solved = true;
          puzzlesSolved++;
          gameState.score += 20;
          achievementSystem.unlockAchievement('solve_5');
          if (successSound && gameState.soundEnabled) successSound.play();
          alert('Correct!');
        } else {
          if (failSound && gameState.soundEnabled) failSound.play();
          alert('Wrong answer!');
        }
        drawMansion();
        updateUI();
      }
      function updateUI() {
        document.getElementById('score').textContent = gameState.score;
        document.getElementById('level').textContent = gameState.level;
        document.getElementById('best-score').textContent = gameState.score; // 可扩展为历史最高分
      }
      function showOverlay(title, message, actionText, action) {
        const overlay = document.getElementById('game-overlay');
        document.getElementById('overlay-title').textContent = title;
        document.getElementById('overlay-message').textContent = message;
        const btn = document.getElementById('overlay-action');
        btn.textContent = actionText;
        btn.onclick = () => {
          overlay.classList.add('hidden');
          if (action) action();
        };
        overlay.classList.remove('hidden');
      }
      document.getElementById('start-btn').onclick = () => {
        gameState.isPlaying = true;
        gameState.isPaused = false;
        gameState.startTime = Date.now();
        document.getElementById('start-btn').classList.add('hidden');
        document.getElementById('pause-btn').classList.remove('hidden');
        initMansion();
      };
      document.getElementById('pause-btn').onclick = () => {
        gameState.isPaused = !gameState.isPaused;
        const pauseBtn = document.getElementById('pause-btn');
        pauseBtn.textContent = gameState.isPaused ? 'Resume' : 'Pause';
      };
      document.getElementById('reset-btn').onclick = () => {
        gameState.score = 0;
        gameState.level = 1;
        gameState.isPlaying = false;
        gameState.isPaused = false;
        gameState.startTime = null;
        document.getElementById('start-btn').classList.remove('hidden');
        document.getElementById('pause-btn').classList.add('hidden');
        document.getElementById('pause-btn').textContent = 'Pause';
        initMansion();
      };
      document.getElementById('sound-btn').onclick = () => {
        gameState.soundEnabled = !gameState.soundEnabled;
        document.getElementById('sound-btn').textContent = `Sound: ${gameState.soundEnabled ? 'On' : 'Off'}`;
      };
      window.addEventListener('keydown', e => {
        if (!gameState.isPlaying || gameState.isPaused) return;
        if (e.key === 'ArrowUp') tryMove(0, -1);
        if (e.key === 'ArrowDown') tryMove(0, 1);
        if (e.key === 'ArrowLeft') tryMove(-1, 0);
        if (e.key === 'ArrowRight') tryMove(1, 0);
      });
      achievementSystem.updateAchievementDisplay();
    });
    // GDPR 弹窗控制逻辑
    document.addEventListener('DOMContentLoaded', function() {
      const gdprModal = document.getElementById('gdpr-modal');
      const gdprAccept = document.getElementById('gdpr-accept');
      if (!localStorage.getItem('gdprAccepted')) {
        gdprModal.style.display = 'flex';
      } else {
        gdprModal.style.display = 'none';
      }
      gdprAccept.onclick = function() {
        localStorage.setItem('gdprAccepted', 'yes');
        gdprModal.style.display = 'none';
      };
    });
  </script>























































<div class="mt-8 w-full max-w-2xl mx-auto">
  <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">More Strategy Games</h3>
  <div class="flex flex-wrap justify-center gap-2">
    <a href="strategy_in5.html" class="bg-white rounded-lg shadow p-2 w-40 hover:shadow-lg transition flex flex-col items-center">
      <picture>
        <source srcset="/images/games/strategy-in5.webp" type="image/webp">
        <picture>
      <source srcset="/images/games/strategy-in5.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/strategy-in5.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/strategy-in5.webp" type="image/webp">
      <picture>
      <source srcset="/images/games/strategy-in5.webp" type="image/webp">
      <img src="/images/games/strategy-in5.webp" alt="strategy in5 html5 game, in5 online play, free strategy game" title="strategy in5 html5 game, in5 online play, free strategy game" loading="lazy" decoding="async">
    </picture>
    </picture>
    </picture>
    </picture>
      </picture>
      <h4 class="font-bold text-gray-800 text-sm mb-1 text-center">Strategy In5 Game</h4>
      <p class="text-gray-600 text-xs text-center">A brand new HTML5 strategy game!</p>
    </a>
  </div>
</div>

</body>
</html> 